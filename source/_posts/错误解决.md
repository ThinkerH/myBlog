
---
layout: post
title: "duplicate symbol _OBJC_CLASS_$_className in:"错误解决
tags: 学习
---

这几天公司iOS移动开发用到了定位功能，要及=集成百度地图，在集成的过程中报了如题的冲突错误。
根据经验，这种错误一般是文件类名冲突导致的，检查了几个地方，发现是导入的百度地图第三方库和工程里面原有的一个静态库里面的类名产生了冲突，Google了一会，了解了大致的问题原因。

##原因：

一些第三方库里对系统库的类加了 category ，这时，就需要使用编译参数： -ObjC ，这样第三方库中对系统类作的扩展方法才能在工程中使用。但是使用 -Objc 后，会产生两个问题:

>1 、 undefined symbols 

>2 、 duplicate symbol

__undefined symbols 说明工程中没有引入第三方库引用的库。__

如果不加 -ObjC 参数，则在编译时不会出错，但运行时用到了没引用库的方法，则系统会崩溃。

这个问题好解决。只要找到缺的库，引入工程就可以了。

__duplicate symbol 的问题就不好解决了，说明第三方库中的类名和工程中的类名，或其它第三方库中的类名重名了。__

最常见的比如 Reachability 这个类，如果第三方库中引用了，自己的工程中也引用了，就会报 duplicate symbol 。

如果引用的第三方库没有源代码，就只能将自己工程中的重名类重命名了。



>__应对上面的问题，如果自己要制作一个库的话，要注意两点：__

>1 、避免对系统类加 category, 这样，别人用你的库时，不加 ObjC 参数也可以用你的库。

>2 、如果库中用到了其它的第三方的源代码，尤其是用的比较普遍的，如 Reachability, 一定一定要对

>这些类重命名，最常见的作法就是给类名加个前缀。以避免别人用你的库时，产生 duplicate symbol 的问题。

##解决：
原因找到了，下面是解决办法。

根据[《聊聊 "-ObjC" 的故事》](http://blog.csdn.net/crash163/article/details/52088096)这篇文章，了解了__"—ObjC"__等flag的用法和作用，由于我的问题是两个第三方库冲突，无法改类名，所以又恰好引用的百度第三方库的部分库不需要添加__"ObjC"__也可以，所有就是用__"force_load"__，后面加上要加载的库路径，编译，问题解决。
